drop table COLLECTION_INFO;
drop table CONTRIBUTOR;
drop table USERS;
drop table EXPENSE_INFO;
drop table EARNING_PLAN;
drop table BUDGET;

CREATE TABLE CONTRIBUTOR(
	ID BIGINT GENERATED BY DEFAULT AS IDENTITY (START WITH 1, INCREMENT BY 1) NOT NULL,
	CONTRIBUTOR_NAME VARCHAR(50) NOT NULL,
	CONTRIBUTOR_FULL_NAME VARCHAR(100) NOT NULL,
	ASSOCIATION VARCHAR(50),
	PRIMARY KEY (ID)
);

alter table CONTRIBUTOR add DISPLAY_NAME VARCHAR(50);
alter table CONTRIBUTOR add ACTIVE BOOLEAN DEFAULT TRUE NOT NULL;
alter table CONTRIBUTOR add EMAIL VARCHAR(100);

CREATE TABLE USERS (
  USER_ID BIGINT GENERATED BY DEFAULT AS IDENTITY (START WITH 1, INCREMENT BY 1) NOT NULL,
  USERNAME varchar(45) NOT NULL,
  PASSWORD varchar(64) NOT NULL,
  ROLE varchar(45) NOT NULL,
  ENABLED boolean DEFAULT false,
  PRIMARY KEY (USER_ID)
);

alter table USERS add constraint USERNAME_KEY unique (USERNAME);
alter table CONTRIBUTOR add constraint CONTRIBUTOR_NAME_KEY unique (CONTRIBUTOR_NAME);

CREATE TABLE COLLECTION_INFO (
	ID BIGINT GENERATED BY DEFAULT AS IDENTITY (START WITH 1, INCREMENT BY 1) NOT NULL,
	CONTRIBUTION_TYPE VARCHAR(50) NOT NULL,
	CONTRIBUTOR VARCHAR(50) NOT NULL REFERENCES CONTRIBUTOR(CONTRIBUTOR_NAME),
	COLLECTION_TYPE VARCHAR(200) NOT NULL,
	AMOUNT DOUBLE NOT NULL,
	COLLECTION_YEAR INTEGER NOT NULL,
	COLLECTION_MONTH VARCHAR(20) NOT NULL,
	COLLECTION_DATE TIMESTAMP NOT NULL,
	CREATED_DATE TIMESTAMP NOT NULL,
	UPDATED_DATE TIMESTAMP NOT NULL,
	NOTE VARCHAR(10000),
	CREATED_BY VARCHAR(45) NOT NULL REFERENCES USERS(USERNAME),
	PRIMARY KEY (ID)
);

alter table COLLECTION_INFO add FUND_PAYMENT_METHOD VARCHAR(50);
alter table COLLECTION_INFO add BUDGET_CATEGORY_TYPE VARCHAR(200);


CREATE TABLE EXPENSE_INFO (
	ID BIGINT GENERATED BY DEFAULT AS IDENTITY (START WITH 1, INCREMENT BY 1) NOT NULL,
	EXPENSE_NAME VARCHAR(200),
	EXPENSE_GROUP VARCHAR(200),
	EXPENSE_TYPE VARCHAR(200),
	REIMBURSEMENT_REQUIRED BOOLEAN DEFAULT FALSE NOT NULL,
	REIMBURSEMENT_METHOD VARCHAR(200),
	REIMBURSED BOOLEAN DEFAULT FALSE NOT NULL,
	PAYMENT_METHOD VARCHAR(200),
	REPORTED_BY VARCHAR(200) NOT NULL,
	STATUS VARCHAR(200) NOT NULL,
	APPROVED_BY VARCHAR(200),
	IMAGE_REFERENCE_PATH VARCHAR(2000),
	AMOUNT DOUBLE NOT NULL,
	EXPENSE_DATE TIMESTAMP NOT NULL,
	CREATED_DATE TIMESTAMP NOT NULL,
	UPDATED_DATE TIMESTAMP NOT NULL,
	DESCRIPTION VARCHAR(10000),
	CREATED_BY VARCHAR(45) NOT NULL REFERENCES USERS(USERNAME),
	PRIMARY KEY (ID)
);

alter table EXPENSE_INFO add EXPENSE_YEAR INTEGER;

CREATE TABLE EARNING_PLAN (
	ID BIGINT GENERATED BY DEFAULT AS IDENTITY (START WITH 1, INCREMENT BY 1) NOT NULL,
	EARNING_YEAR INTEGER NOT NULL,
	ESTIMATED_AMOUNT DOUBLE NOT NULL,
	CREATED_DATE TIMESTAMP NOT NULL,
	UPDATED_DATE TIMESTAMP NOT NULL,
	DESCRIPTION VARCHAR(10000),
	CREATED_BY VARCHAR(45) NOT NULL REFERENCES USERS(USERNAME),
	PRIMARY KEY (ID)
);

CREATE TABLE BUDGET (
	ID BIGINT GENERATED BY DEFAULT AS IDENTITY (START WITH 1, INCREMENT BY 1) NOT NULL,
	BUDGET_GROUP VARCHAR(200) NOT NULL,
	BUDGET_TYPE VARCHAR(200) NOT NULL,
	BUDGET_YEAR INTEGER NOT NULL,
	AMOUNT DOUBLE NOT NULL,
	CREATED_DATE TIMESTAMP NOT NULL,
	UPDATED_DATE TIMESTAMP NOT NULL,
	DESCRIPTION VARCHAR(10000),
	CREATED_BY VARCHAR(45) NOT NULL REFERENCES USERS(USERNAME),
	PRIMARY KEY (ID)
);

alter table BUDGET add IS_SAVING BOOLEAN DEFAULT FALSE NOT NULL;
alter table COLLECTION_INFO add REPORTED_BY VARCHAR(50);

Marga1Jesus99
Mukti1999

INSERT INTO users (username,password,role,enabled)
VALUES ('admin','$2a$10$RN/IxovB50kKkR4ZoNsJbu/kVkb3aFcJSRzde2WwZkkinZrfpBkQq','ROLE_ADMIN', true);

INSERT INTO users (username,password,role,enabled)
VALUES ('report.admin','$2a$10$PoDI5MprGZ2SMAYMlyju6uArxWTCVMtsAX09mzTFsMoSibmVxL59i','ROLE_ADMIN', true);

INSERT INTO users (username,password,role,enabled)
VALUES ('unfadmin','$2a$10$PoDI5MprGZ2SMAYMlyju6uArxWTCVMtsAX09mzTFsMoSibmVxL59i','ROLE_ADMIN', true);

INSERT INTO users (username,password,role,enabled, access_level)
VALUES ('basic','$2a$10$PoDI5MprGZ2SMAYMlyju6uArxWTCVMtsAX09mzTFsMoSibmVxL59i','ROLE_USER', true, 'BASIC_USER');

alter table USERS add ACCESS_LEVEL VARCHAR(50);
update USERS set ACCESS_LEVEL = 'SUPERUSER';

delete from users where username != 'admin';
